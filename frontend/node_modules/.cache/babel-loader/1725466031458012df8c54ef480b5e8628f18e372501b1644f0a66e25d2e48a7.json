{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Idokoken\\\\Desktop\\\\ict_exercise\\\\projects\\\\fullstack\\\\PiTravel\\\\frontend\\\\src\\\\pages\\\\PhotosUploader.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PhotosUploader = _ref => {\n  _s();\n  let {\n    photos,\n    setPhotos\n  } = _ref;\n  const [photoLink, setPhotoLink] = useState(\"\");\n  const addPhotoByLink = async e => {\n    e.preventDefault();\n    const {\n      data: filename\n    } = axios.post(\"/uplaodbylink\", {\n      link: photoLink\n    });\n    setPhotos(prev => {\n      return [...prev, filename];\n    });\n    setPhotoLink(\"\");\n  };\n  const uploadPhotos = e => {\n    const {\n      files\n    } = e.target;\n    let data = new FormData();\n    for (let i = 0; i < files.length; i++) {\n      data.append(\"photos\", files[i]);\n    }\n    axios.post(\"/upload\", data, {\n      headers: {\n        \"Content-type\": \"multipart/form-data\"\n      }\n    }).then(resp => {\n      const {\n        data: filenames\n      } = resp;\n      setPhotos(prev => {\n        console.log([...prev, ...filenames]);\n        return [...prev, ...filenames];\n      });\n      // console.log(filenames);\n    }).catch(err => console.log(err));\n    // console.log(files);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"form-label my-2\",\n      children: \"Photos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-secondary\",\n      children: \"the more = better\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"img-link\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"photoLink\",\n        className: \"form-control\",\n        value: photoLink,\n        onChange: e => setPhotoLink(e.target.value),\n        placeholder: \"add using a link...jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: addPhotoByLink,\n        children: \"Add photos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), photos.length > 0 && photos.map((link, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `${link}`,\n          alt: \"cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      name: \"photos\",\n      className: \"btn photos my-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        className: \"hidden\",\n        onChange: uploadPhotos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), \" Upload\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(PhotosUploader, \"ogRSh9tVf8lxVzJATdK7xQ1iMyw=\");\n_c = PhotosUploader;\nexport default PhotosUploader;\nvar _c;\n$RefreshReg$(_c, \"PhotosUploader\");","map":{"version":3,"names":["React","useState","axios","PhotosUploader","photos","setPhotos","photoLink","setPhotoLink","addPhotoByLink","e","preventDefault","data","filename","post","link","prev","uploadPhotos","files","target","FormData","i","length","append","headers","then","resp","filenames","console","log","catch","err","value","map"],"sources":["C:/Users/Idokoken/Desktop/ict_exercise/projects/fullstack/PiTravel/frontend/src/pages/PhotosUploader.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst PhotosUploader = ({ photos, setPhotos }) => {\r\n  const [photoLink, setPhotoLink] = useState(\"\");\r\n\r\n  const addPhotoByLink = async (e) => {\r\n    e.preventDefault();\r\n    const { data: filename } = axios.post(\"/uplaodbylink\", { link: photoLink });\r\n    setPhotos((prev) => {\r\n      return [...prev, filename];\r\n    });\r\n    setPhotoLink(\"\");\r\n  };\r\n\r\n  const uploadPhotos = (e) => {\r\n    const { files } = e.target;\r\n    let data = new FormData();\r\n    for (let i = 0; i < files.length; i++) {\r\n      data.append(\"photos\", files[i]);\r\n    }\r\n    axios\r\n      .post(\"/upload\", data, {\r\n        headers: { \"Content-type\": \"multipart/form-data\" },\r\n      })\r\n      .then((resp) => {\r\n        const { data: filenames } = resp;\r\n        setPhotos((prev) => {\r\n          console.log([...prev, ...filenames]);\r\n          return [...prev, ...filenames];\r\n        });\r\n        // console.log(filenames);\r\n      })\r\n      .catch((err) => console.log(err));\r\n    // console.log(files);\r\n  };\r\n  return (\r\n    <>\r\n      <label className=\"form-label my-2\">Photos</label>\r\n      <p className=\"text-secondary\">the more = better</p>\r\n      <div className=\"img-link\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"photoLink\"\r\n          className=\"form-control\"\r\n          value={photoLink}\r\n          onChange={(e) => setPhotoLink(e.target.value)}\r\n          placeholder={\"add using a link...jpg\"}\r\n        />\r\n        <button className=\"btn btn-secondary\" onClick={addPhotoByLink}>\r\n          Add photos\r\n        </button>\r\n      </div>\r\n\r\n      {photos.length > 0 &&\r\n        photos.map((link, i) => (\r\n          <div key={i}>\r\n            <div className=\"img-container\">\r\n              <img src={`${link}`} alt=\"cover\" />\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n      <br />\r\n      <label name=\"photos\" className=\"btn photos my-2\">\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          onChange={uploadPhotos}\r\n        />\r\n        <i className=\"fa fa-upload\"></i> Upload\r\n      </label>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PhotosUploader;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}